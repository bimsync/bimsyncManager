<div class="clr-row">
    <div class="clr-col-4" style="height: 30rem; overflow: auto">
        <div *ngIf='projects && projects.length'>
            <label for="selects_1">Projects</label>
            <div class="select">
                <select id="selects_1" (change)="GetModels()" [(ngModel)]="selectedProject">
                    <option *ngFor='let project of projects' [ngValue]="project">{{project.name}}</option>
                </select>
            </div>
        </div>

        <div *ngIf='models && models.length'>
            <label for="selects_2">Models</label>
            <div class="select">
                <select id="selects_2" (change)="GetRevisions()" [(ngModel)]="selectedModel">
                    <option *ngFor='let model of models; let i = index; trackBy: trackByFn' [ngValue]="model">{{model.name}}</option>
                </select>
            </div>
        </div>

        <div *ngIf='revisions && revisions.length'>
            <label for="selects_3">Revisions</label>
            <div class="select">
                <select id="selects_3" (change)="GetProductTypeSummary()" [(ngModel)]="selectedRevision">
                    <option *ngFor='let revision of revisions; let i = index; trackBy: trackByFn' [ngValue]="revision">{{revision.version}}</option>
                </select>
            </div>
        </div>

        <div *ngIf='ifcClasses && ifcClasses.length'>
            <label for="selects_4">Categories</label>
            <div class="select">
                <select id="selects_4" (change)="GetProducts()" [(ngModel)]="selectedIfcClass">
                    <option *ngFor='let ifcClass of ifcClasses; let i = index; trackBy: trackByFn' [ngValue]="ifcClass">{{ifcClass.typeName}}
                        ({{ifcClass.typeQuantity}})</option>
                </select>
            </div>
        </div>
        <table class="table" *ngIf='selectedIfcClass' droppable (onDrop)="onRowPropertyDrop($event)">
            <thead>
                <tr>
                    <th class="left">Rows</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="left">
                        <span *ngIf='!selectedRowProperty'>Drop a property here ...</span>
                        <span *ngIf='selectedRowProperty' class="label clickable" (click)=onRowLabelClick()>
                            {{selectedRowProperty.name}}
                            <clr-icon shape="window-close"></clr-icon>
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>

        <table class="table" *ngIf='selectedIfcClass' droppable (onDrop)="onValuePropertyDrop($event)">
            <thead>
                <tr>
                    <th class="left">Values</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="left">
                        <span *ngIf='!selectedValueProperties.length'>Drop properties here ...</span>
                        <span class="label clickable" (click)=onValueLabelClick(selectedProperty) *ngFor="let selectedProperty of selectedValueProperties">
                            {{selectedProperty.name}}
                            <clr-icon shape="window-close"></clr-icon>
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>

        <table class="table" *ngIf='selectedIfcClass'>
            <thead>
                <tr>
                    <th class="left">Properties</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td *ngIf="selectedProductsLoading">
                        <span class="spinner">
                            Loading
                        </span>
                    </td>
                    <td *ngIf="!selectedProductsLoading" class="left">
                        <clr-tree-node *ngFor="let displayedPropertySet of displayedPropertySets">
                            {{displayedPropertySet.name}}
                            <ng-template [clrIfExpanded]="true">
                                <clr-tree-node draggable *ngFor="let displayedProperty of displayedPropertySet.properties"
                                    [(clrSelected)]="displayedProperty.enable" (clrSelectedChange)="onTreeSelectionChange(displayedProperty)"
                                    [dragData]="displayedProperty">
                                    {{displayedProperty.name}}
                                </clr-tree-node>
                            </ng-template>
                        </clr-tree-node>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="clr-col-8" style="height: 30rem; overflow: auto">
        <clr-datagrid *ngIf='groupedProperties && objectKeys(groupedProperties).length'>
            <clr-dg-column [clrDgField]="'key'">{{selectedRowProperty.name}}</clr-dg-column>
            <clr-dg-column *ngFor="let selectedProperty of selectedValueProperties" [clrDgField]="'selectedProperty.name'">{{selectedProperty.name}}</clr-dg-column>

            <clr-dg-row *ngFor='let key of objectKeys(groupedProperties)'>
                <clr-dg-cell>{{key}}</clr-dg-cell>
                <clr-dg-cell *ngFor="let selectedProperty of objectKeys(groupedProperties[key])">{{groupedProperties[key][selectedProperty]}}</clr-dg-cell>
            </clr-dg-row>

            <clr-dg-footer>{{selectedIfcClass.typeQuantity}} {{selectedIfcClass.typeName}}</clr-dg-footer>
        </clr-datagrid>
    </div>
</div>