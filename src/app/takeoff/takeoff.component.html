<div class='clr-row' style='height: 100%;'>
    <div class='clr-col-4 box'>
        <h4>{{selectedProject.name}}</h4>
        <div *ngIf='models && models.length'>
            <label for='selects_2'>Models</label>
            <div class='select'>
                <select id='selects_2' (change)='GetRevisions()' [(ngModel)]='selectedModel'>
                    <option *ngFor='let model of models; let i = index; trackBy: trackByFn' [ngValue]='model'>{{model.name}}</option>
                </select>
            </div>
        </div>

        <div *ngIf='revisions && revisions.length'>
            <label for='selects_3'>Revisions</label>
            <div class='select'>
                <select id='selects_3' (change)='GetProductTypeSummary()' [(ngModel)]='selectedRevision'>
                    <option *ngFor='let revision of revisions; let i = index; trackBy: trackByFn' [ngValue]='revision'>{{revision.version}}</option>
                </select>
            </div>
        </div>

        <div *ngIf='ifcClasses && ifcClasses.length'>
            <label for='selects_4'>Categories</label>
            <div class='select'>
                <select id='selects_4' (change)='GetProducts()' [(ngModel)]='selectedIfcClass'>
                    <option *ngFor='let ifcClass of ifcClasses; let i = index; trackBy: trackByFn' [ngValue]='ifcClass'>{{ifcClass.typeName}}
                        ({{ifcClass.typeQuantity}})</option>
                </select>
            </div>
        </div>
        <div class="row" *ngIf='selectedIfcClass' style="display: none">
            <div class='clr-col-12'>
                <table class='table' droppable (onDrop)='onFilterPropertyDrop($event)'>
                    <thead>
                        <tr>
                            <th class='left'>Filters</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class='left'>
                                <span *ngIf='!selectedFilterProperties.length'>Drop properties here ...</span>
                                <app-field-selector *ngFor='let selectedProperty of selectedFilterProperties'
                                    (propertyClosed)='onFilterLabelClose(selectedProperty)' (propertyUpdated)='onSelectedValueUpdate($event)'
                                    [displayedProperty]='selectedProperty'>
                                </app-field-selector>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class='item' *ngIf='selectedIfcClass'>
            <table class='table' droppable (onDrop)='onValuePropertyDrop($event)'>
                <thead>
                    <tr>
                        <th class='left'>Values</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class='left'>
                            <span *ngIf='!selectedValueProperties.length'>Drop properties here ...</span>
                            <app-field-selector *ngFor='let selectedProperty of selectedValueProperties'
                                (propertyClosed)='onValueLabelClose(selectedProperty)' (propertyUpdated)='onSelectedValueUpdate(selectedProperty,$event)'
                                (rankUpdated)='onRankUpdated(selectedProperty,$event)' [displayedProperty]='selectedProperty'>
                            </app-field-selector>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class='item customTable' *ngIf='selectedIfcClass'>
            <div class='firstline'>
                Header
            </div>
            <div class='line'>
                text
            </div>
        </div>

        <div class='content' *ngIf='selectedIfcClass'>
            <table class='table'>
                <thead>
                    <tr>
                        <th class='left'>Properties</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td *ngIf='selectedProductsLoading'>
                            <span class='spinner'>
                                Loading
                            </span>
                        </td>
                        <td *ngIf='!selectedProductsLoading' class='left' style='padding: 0; padding-left: 0.5rem'>
                            <div style='overflow: auto;'>
                                <clr-tree-node *ngFor='let displayedPropertySet of displayedPropertySets'>
                                    {{displayedPropertySet.name}}
                                    <ng-template [clrIfExpanded]='true'>
                                        <clr-tree-node draggable *ngFor='let displayedProperty of displayedPropertySet.properties'
                                            [(clrSelected)]='displayedProperty.enable' (clrSelectedChange)='onTreeSelectionChange(displayedProperty)'
                                            [dragData]='displayedProperty'>
                                            <clr-icon class='is-highlight' [attr.shape]='displayedProperty.icon'></clr-icon>
                                            {{displayedProperty.name}}
                                        </clr-tree-node>
                                    </ng-template>
                                </clr-tree-node>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
    <div class='clr-col-8' style='overflow: auto'>
        <div class="centered" *ngIf='tableLoading'>
            <span class='spinner'>
                Loading
            </span>
        </div>

        <clr-datagrid *ngIf='listOfRows && listOfRows.length'>
            <clr-dg-column [clrDgField]="selectedValueProperty.columnGuid" *ngFor='let selectedValueProperty of selectedValueProperties'>{{selectedValueProperty.displayName}}</clr-dg-column>
            <clr-dg-row *clrDgItems='let row of listOfRows'>
                <clr-dg-cell *ngFor='let selectedValueProperty of selectedValueProperties'>{{row[selectedValueProperty.columnGuid]}}</clr-dg-cell>
            </clr-dg-row>
            <clr-dg-footer>{{selectedIfcClass.typeQuantity}} {{selectedIfcClass.typeName}}</clr-dg-footer>
        </clr-datagrid>
    </div>
</div>